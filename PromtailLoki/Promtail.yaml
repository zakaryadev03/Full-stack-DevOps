config:
  clients:
    # This is the Loki "push" URL and tenant ID
    - url: http://loki-gateway.logging.svc.cluster.local:80/loki/api/v1/push
      tenant_id: 1

  scrape_configs:
    # This is the default job to scrape Kubernetes pods
    - job_name: kubernetes-pods
      kubernetes_sd_configs:
        - role: pod
          namespaces:
            # This is the key you found:
            # We are explicitly telling Promtail which namespaces to scrape.
            names: 
              - "sre-lab"
              - "logging" 
      
      # This part adds all the useful Kubernetes labels (app, pod, etc.)
      pipeline_stages:
        - docker: {}
      relabel_configs:
        - source_labels: [__meta_kubernetes_pod_node_name]
          target_label: __host__
        - action: replace
          source_labels: [__meta_kubernetes_pod_name]
          target_label: pod
        - action: replace
          source_labels: [__meta_kubernetes_pod_namespace]
          target_label: namespace
        - action: replace
          source_labels: [__meta_kubernetes_pod_container_name]
          target_label: container
        - action: labelmap
          regex: __meta_kubernetes_pod_label_(.+)